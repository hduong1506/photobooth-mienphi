<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Hello Kitty Photobooth</title>

<style>

body{

margin:0;
background:linear-gradient(#ffd6ec,#ffc0e6);
font-family:sans-serif;
text-align:center;
color:#ff1493;

overflow-x:hidden;

}


/* snow */

.snow{

position:fixed;
top:0;
left:0;
width:100%;
height:100%;
pointer-events:none;

}

.snow span{

position:absolute;
color:white;
animation:snow 10s linear infinite;

}

@keyframes snow{

0%{transform:translateY(-10px)}
100%{transform:translateY(100vh)}

}


h1{

font-size:40px;
margin:20px;

}


video{

width:300px;
border-radius:20px;
border:6px solid white;
transform:scaleX(-1);

}


button{

background:#ff1493;
color:white;
border:none;
padding:12px 20px;
margin:10px;
border-radius:10px;
font-size:16px;
cursor:pointer;

}


#strip{

margin:auto;
background:white;
padding:15px;
width:240px;
border-radius:20px;

}


.photo{

width:200px;
height:150px;
background:#eee;
margin:10px auto;
border-radius:10px;
background-size:cover;
background-position:center;

}


#frames{

margin-top:20px;

}


.frameBtn{

width:60px;
height:120px;
margin:5px;
border-radius:10px;
cursor:pointer;
border:3px solid white;

}


footer{

margin:40px;
font-size:18px;

}

</style>
</head>


<body>


<div class="snow" id="snow"></div>


<h1>üéÄ Hello Kitty Photobooth üéÄ</h1>


<video id="video" autoplay></video>

<br>

<button onclick="capture()">Ch·ª•p</button>

<button onclick="download()">T·∫£i ·∫£nh</button>


<div id="strip">

<div class="photo" id="p0"></div>
<div class="photo" id="p1"></div>
<div class="photo" id="p2"></div>
<div class="photo" id="p3"></div>

</div>


<h2>Ch·ªçn khung</h2>

<div id="frames"></div>


<canvas id="canvas" width="240" height="720" hidden></canvas>


<footer>

ƒë∆∞·ª£c t·∫°o b·ªüi hduowgg

</footer>


<script>


/* snow */


for(let i=0;i<50;i++){

let s=document.createElement("span");

s.innerHTML="‚ùÑ";

s.style.left=Math.random()*100+"%";

s.style.animationDuration=5+Math.random()*5+"s";

s.style.fontSize=10+Math.random()*20+"px";

snow.appendChild(s);

}


/* camera */


let video=document.getElementById("video");


navigator.mediaDevices.getUserMedia({video:true})

.then(stream=>video.srcObject=stream);



let photos=[null,null,null,null];

let index=0;



function capture(){


let c=document.createElement("canvas");

c.width=200;

c.height=150;


let ctx=c.getContext("2d");

ctx.scale(-1,1);

ctx.drawImage(video,-200,0,200,150);


let url=c.toDataURL();


photos[index]=url;


document.getElementById("p"+index).style.backgroundImage="url("+url+")";


index++;

if(index>3) index=0;


}



/* frame */


let frameColor="#ff1493";


let framesDiv=document.getElementById("frames");


let colors=[

"#ff1493","#ff69b4","#ff85c1","#ffb6c1",

"#ffc0cb","#ff99cc","#ff66cc","#ff33cc",

"#ff00cc","#ff3399","#ff0066","#ff6699",

"#ff3366","#ff0033","#ff9999","#ffcccc",

"#ff66ff","#ff33ff","#cc00cc","#cc66cc",

"#cc33cc","#cc0099","#ff6699","#ff3399",

"#ff1493","#ff85c1","#ff69b4","#ffc0cb",

"#ff99cc","#ff66cc"

];


colors.forEach(color=>{


let f=document.createElement("div");

f.className="frameBtn";

f.style.background=color;


f.onclick=()=>{

frameColor=color;

};


framesDiv.appendChild(f);


});



/* download */


function download(){


let canvas=document.getElementById("canvas");

let ctx=canvas.getContext("2d");


ctx.fillStyle="white";

ctx.fillRect(0,0,240,720);


ctx.strokeStyle=frameColor;

ctx.lineWidth=15;

ctx.strokeRect(0,0,240,720);


let y=20;


for(let i=0;i<4;i++){

if(photos[i]){

let img=new Image();

img.src=photos[i];

ctx.drawImage(img,20,y,200,150);

}

y+=170;

}


let link=document.createElement("a");

link.download="photobooth.png";

link.href=canvas.toDataURL();

link.click();


}



</script>


</body>
</html>
